<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yë¥¼ ì²´í¬í•´!</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700;900&family=IBM+Plex+Sans+KR:wght@400;600&family=Jua&display=swap" rel="stylesheet">
    <style>
        :root {
            --font-title: 'Noto Sans Korean', sans-serif;
            --font-dialog: 'IBM Plex Sans KR', sans-serif;
            --font-ui: 'Jua', sans-serif;
        }
        body {
            font-family: var(--font-ui);
            background-color: #3d4042;
            margin: 0; padding: 20px;
            display: flex; justify-content: center; align-items: center;
            min-height: 100vh; text-align: center;
            user-select: none;
            box-sizing: border-box;
        }
        .overlay {
            width: 100%; height: 100%;
            position: fixed; top: 0; left: 0;
            display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            background-color: rgba(0, 0, 0, 0.75);
            padding: 20px; box-sizing: border-box;
            z-index: 100;
        }
        .overlay h1 {
            font-family: var(--font-title);
            font-weight: 900;
            font-size: 64px; color: #ffc107;
            text-shadow: 4px 4px 0 #000, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000;
        }
        .overlay .btn { font-size: 28px; padding: 15px 40px; margin-top: 20px; }

        #explanation-screen {
            justify-content: flex-start;
            align-items: center;
            overflow-y: auto;
        }
        #explanation-content {
            background-color: #fff;
            color: #000;
            padding: 30px 40px;
            border: 1px solid #999;
            width: 100%;
            max-width: 700px;
            text-align: left;
            margin: 20px 0;
            box-sizing: border-box;
        }
        #explanation-content h1 {
            font-family: var(--font-title);
            font-weight: 900;
            font-size: 36px;
            color: #000;
            text-shadow: none;
            text-align: center;
            margin-bottom: 25px;
        }
        #explanation-content h2 {
            font-family: var(--font-ui);
            font-size: 22px;
            border-bottom: 2px solid #000;
            padding-bottom: 5px;
            margin-top: 20px;
            margin-bottom: 15px;
        }
        #explanation-content p, #explanation-content li {
            font-family: var(--font-dialog);
            font-size: 17px;
            line-height: 1.8;
            font-weight: 600;
        }
        #explanation-content ul { padding-left: 20px; }
        #explanation-content .btn { font-size: 20px; padding: 10px 25px; display: block; margin: 30px auto 0 auto; }

        #win-screen img {
            max-width: 80%;
            max-height: 50vh;
            border: 5px solid #fff;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        #win-screen h1 { font-size: 52px; color: #28a745; margin: 10px 0; font-weight: 900; }

        #game-wrapper {
            width: 100%;
            max-width: 600px; padding: 20px;
            border: 1px solid #333; border-radius: 5px; background-color: #fdf5e6;
            box-shadow: 5px 5px 15px rgba(0,0,0,0.5); color: #333; position: relative;
            box-sizing: border-box;
        }
        #game-wrapper::before {
            content: 'TOP SECRET'; position: absolute; top: 15px; right: 20px;
            font-size: 16px; color: #d9534f; font-weight: bold;
            border: 2px solid #d9534f; padding: 2px 5px; transform: rotate(10deg);
        }
        #game-wrapper h1 {
            font-family: var(--font-title); font-weight: 900; font-size: 42px; color: #333;
            border-bottom: 4px double #333; padding-bottom: 10px; margin-bottom: 5px;
        }
        #game-wrapper h2 { font-size: 18px; color: #555; margin-top: 0; margin-bottom: 20px; }
        #target-area {
            position: relative; background-color: #dbe8f0; border: 2px solid #a2b4bf;
            border-radius: 5px; padding: 10px; margin: 20px 0; height: 140px;
            display: flex; justify-content: center; align-items: center;
        }
        #target {
            height: 100%; cursor: pointer; transition: transform 0.2s;
        }
        #target:hover { transform: scale(1.1); }
        #target:active { transform: scale(1.05); }

        #dialog-box {
            font-family: var(--font-dialog); font-size: 19px; font-weight: 600; line-height: 1.7;
            margin-top: 25px; padding: 20px; min-height: 140px; color: #000;
            background-color: #fff; border: 2px solid #333; border-radius: 15px;
            white-space: pre-wrap; text-align: left; position: relative;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1); cursor: pointer;
        }
        #continue-indicator {
            position: absolute; right: 20px; bottom: 10px;
            font-size: 24px; animation: blink 1.5s infinite;
        }
        @keyframes blink { 50% { opacity: 0; } }
        .speaker { font-weight: 600; }
        .speaker-p { color: #2980b9; } .speaker-y { color: #c0392b; }
        .speaker-o { color: #27ae60; } .speaker-n { color: #8e44ad; }

        #progress-bar-container {
            width: 100%; height: 30px; background-color: #ccc; border-radius: 5px;
            margin: 20px 0; border: 2px solid #555; padding: 3px;
        }
        #progress-bar {
            width: 0%; height: 100%; background: linear-gradient(90deg, #f39c12, #e67e22);
            border-radius: 2px; transition: width 0.3s ease-in-out;
        }
        #command-buttons { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 20px; }
        .btn {
            font-family: var(--font-ui); font-size: 20px; border: 2px solid #555;
            border-radius: 5px; cursor: pointer; transition: all 0.2s;
            background-color: #f5f5f5; color: #333; box-shadow: 0 3px #999;
            -webkit-tap-highlight-color: transparent;
        }
        .btn:hover:not(:disabled) { background-color: #e0e0e0; }
        .btn:active:not(:disabled) { transform: translateY(2px); box-shadow: 0 1px #666; }
        .btn:disabled { background-color: #bbb; color: #777; cursor: not-allowed; box-shadow: 0 3px #888; }
        .retry-btn { width: auto; background-color: #5cb85c; color: white; border-color: #4cae4c; }
        #game-status { margin-top: 20px; font-size: 24px; font-weight: bold; height: 30px; }
        .game-over { color: #d9534f; }
        .hidden { display: none !important; }

        /* --- ëª¨ë°”ì¼ ìµœì í™” (Mobile Optimization) --- */
        @media (max-width: 600px) {
            body {
                padding: 10px;
            }
            .overlay h1 {
                font-size: 48px;
            }
            #explanation-content {
                padding: 20px;
            }
             #explanation-content h1 {
                font-size: 28px;
            }
             #explanation-content h2 {
                font-size: 20px;
            }
             #explanation-content p, #explanation-content li {
                font-size: 16px;
            }
            
            #game-wrapper {
                padding: 15px;
            }
            #game-wrapper h1 {
                font-size: 32px;
            }
            #dialog-box {
                padding: 15px;
                min-height: 120px;
                font-size: 18px;
            }
            #command-buttons {
                grid-template-columns: 1fr; /* ë²„íŠ¼ì„ 1ì—´ë¡œ ìŒ“ìŒ */
                gap: 12px;
            }
            .btn {
                padding: 15px;
                font-size: 22px;
            }
        }

    </style>
</head>
<body>

    <div id="start-screen" class="overlay">
        <h1>Yë¥¼ ì²´í¬í•´!</h1>
        <button class="btn" id="btn-start">ì‹œì‘í•˜ê¸°</button>
    </div>

    <div id="explanation-screen" class="overlay hidden">
        <div id="explanation-content">
            <h1>ì²´í¬ ì‘ì „ ì§€ì¹¨</h1>
            <h2>ë°°ê²½</h2>
            <p>í”¼ì˜ì Y, í˜„ì¬ êµ¬ì¹˜ì†Œ ë‚´ì—ì„œ ìˆ˜ê° ì¤‘, ì‚¬ë²• ì‹œìŠ¤í…œì„ ì¡°ë¡±í•˜ë©° ëª¨ë“  ìˆ˜ì‚¬ í˜‘ì¡°ë¥¼ ê±°ë¶€í•˜ê³  ìˆìŒ. ì´ëŠ” êµ­ê°€ ê¸°ê°•ì„ ë’¤í”ë“œëŠ” ì‹¬ê°í•œ ë„ì „ í–‰ìœ„ë¡œ ê°„ì£¼ë¨.</p>
            <h2>ì„ë¬´</h2>
            <p>ê·€ê´€ì€ íŠ¹ë³„ê²€ì‚¬íŒ€ì˜ í˜„ì¥ ì±…ì„ìë¡œì„œ, í”¼ì˜ì Yì˜ ì €í•­ì„ ë¬´ë ¥í™”í•˜ê³  ì²´í¬ ì˜ì¥ì„ ì§‘í–‰í•˜ì—¬ ê°•ì œ ìˆ˜ì‚¬ë¥¼ ê°œì‹œí•´ì•¼ í•¨.</p>
            <h2>ì‘ì „ ê°€ì´ë“œ</h2>
            <p>YëŠ” ê·¹ë„ë¡œ ì˜ˆì¸¡ ë¶ˆê°€ëŠ¥í•œ ì¸ë¬¼ì„. ê·¸ì˜ ì‹¬ë¦¬ë¥¼ íŒŒì•…í•˜ê³  ìƒí™©ì— ë§ëŠ” ìµœì ì˜ ì»¤ë§¨ë“œë¥¼ ì„ íƒí•˜ì—¬ ì‹¬ë¦¬ì  ìš°ìœ„ë¥¼ ì í•˜ëŠ” ê²ƒì´ ì¤‘ìš”.</p>
            <ul>
                <li><strong>ì„¤ë“:</strong> ë…¼ë¦¬ì™€ ëª…ë¶„ì„ í†µí•´ Yì˜ í˜‘ì¡°ë¥¼ ìœ ë„.</li>
                <li><strong>ìœ í˜¹:</strong> Yê°€ ì†”ê¹ƒí•  ë§Œí•œ ì œì•ˆìœ¼ë¡œ ê·¸ë¥¼ íšŒìœ .</li>
                <li><strong>ê°•ì œ:</strong> ë‹¨í˜¸í•œ íƒœë„ì™€ ë¬¼ë¦¬ì  ì••ë°•ìœ¼ë¡œ Yë¥¼ êµ´ë³µ.</li>
                <li><strong>ê³„ì—„:</strong> ëª¨ë“  ìˆ˜ë‹¨ì´ ì‹¤íŒ¨í–ˆì„ ì‹œ ì‚¬ìš©í•˜ëŠ” ìµœí›„ì˜ ì„ íƒ.</li>
            </ul>
            <p style="text-align: center; font-weight: 600; margin-top: 25px;">â€» ë³¸ ì‘ì „ì˜ ì„±ê³µì— íŠ¹ê²€ì˜ ëª…ìš´ì´ ê±¸ë ¤ìˆë‹¤. ì‹¤íŒ¨ëŠ” ìš©ë‚©ë˜ì§€ ì•ŠëŠ”ë‹¤.</p>
            <button class="btn" id="btn-continue">ì§‘í–‰ ê°œì‹œ</button>
        </div>
    </div>
    
    <div id="win-screen" class="overlay hidden">
        <img src="https://i.imgur.com/3k6aBx3.png" alt="ì²´í¬ ì„±ê³µ">
        <h1>ì²´í¬ì˜ì¥ ì§‘í–‰ ì„±ê³µ!</h1>
        <button class="btn retry-btn" id="btn-win-retry">ë‹¤ì‹œ í•˜ê¸°</button>
    </div>

    <div id="game-wrapper" class="hidden">
        <h1>Y ì²´í¬ ì‘ì „</h1> <h2>- ì²´í¬ ì˜ì¥ ì§€íœ˜ í˜„ì¥ ë³´ê³ ì„œ -</h2>
        <div id="target-area">
             <img id="target" src="https://img4.daumcdn.net/thumb/R658x0.q70/?fname=https://t1.daumcdn.net/news/202508/04/seouleconomy/20250804161736153smhj.jpg" alt="Y">
        </div>
        <div id="dialog-box" onclick="handleDialogClick()">
             <span id="text-content"></span>
             <span id="continue-indicator" class="hidden">â–¼</span>
        </div>
        <div id="progress-bar-container"><div id="progress-bar"></div></div>
        <div id="command-buttons">
            <button class="btn" onclick="sendCommand('ì„¤ë“')">ğŸ’¬ ì„¤ë“</button>
            <button class="btn" onclick="sendCommand('ìœ í˜¹')">ğŸ ìœ í˜¹</button>
            <button class="btn" onclick="sendCommand('ê°•ì œ')">âœŠ ê°•ì œ</button>
            <button class="btn" onclick="sendCommand('ê³„ì—„')">ğŸ’¥ ê³„ì—„</button>
            <button class="btn retry-btn hidden" id="btn-fail-retry">ğŸ”„ ë‹¤ì‹œ í•˜ê¸°</button>
        </div>
        <div id="game-status"></div>
    </div>

    <script>
        const startScreen = document.getElementById('start-screen'), explanationScreen = document.getElementById('explanation-screen'),
              gameWrapper = document.getElementById('game-wrapper'), winScreen = document.getElementById('win-screen'),
              btnStart = document.getElementById('btn-start'), btnContinue = document.getElementById('btn-continue'),
              btnWinRetry = document.getElementById('btn-win-retry'), target = document.getElementById('target'),
              dialogBox = document.getElementById('dialog-box'), textContentSpan = document.getElementById('text-content'),
              gameStatus = document.getElementById('game-status'), progressBar = document.getElementById('progress-bar'),
              commandButtons = document.getElementById('command-buttons'), btnFailRetry = document.getElementById('btn-fail-retry'),
              allButtons = commandButtons.querySelectorAll('button:not(.retry-btn)'), continueIndicator = document.getElementById('continue-indicator');

        const quotes = ["ë„¤ê°€ ê°íˆ ë‚˜ë¥¼ ì²´í¬í•´!", "ë¶€ì •ì„ ê±°ëŠ” ìš©ë‚©í•˜ì§€ ì•ŠëŠ”ë‹¤!", "ì¢…ë¶ì„¸ë ¥ì„ ì²™ê²°í•´ì•¼í•´!", "ë ˆê±°ì‹œ ë¯¸ë””ì–´ëŠ” ë¯¿ì„ ìˆ˜ ì—†ë‹¤!", "ìœ¤ ì–´ê²Œì¸!", "ì§‘ì´ ì—†ì–´ ì²­ì•½í†µì¥ì„ ë§Œë“¤ì§€ ëª»í–ˆë‹¤.", "êµ­ë¯¼ì„ ìœ„í•´ ì£¼120ì‹œê°„ì„ ì¼í–ˆê±´ë§Œ...!", "STOP THE STEAL!", "ê²½ê³ ì„± ê³„ì—„ì´ì—ˆì„ ë¿ì¸ë°...", "ì‚¬ë²•ê¹Œì§€ë„ ì¢…ë¶ì¢ŒíŒŒê°€ ì¥ì•…í•˜ë‹¤ë‹ˆ...!!"];
        const correctSequence = ['ì„¤ë“', 'ìœ í˜¹', 'ìœ í˜¹', 'ì„¤ë“', 'ê°•ì œ', 'ì„¤ë“', 'ê°•ì œ', 'ê³„ì—„'];
        const successDialogs = [
            `P:í¬í† ë¼ì¸ì— ì„¸ìš°ì§€ëŠ” ì•Šê² ìŠµë‹ˆë‹¤.\nY:ì •ë§ì¸ê°€? ì‚¬ì§„ì— ì°íˆì§€ë§Œ ì•ŠëŠ”ë‹¤ë©´....!\nN:YëŠ” ê³ ë¯¼í•˜ëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤.`, `P:í›„ë”± ì¡°ì‚¬ ëë‚´ê³  ëœ¨ëˆí•œ êµ­ë°¥ í•œ ê·¸ë¦‡ì— ì†Œì£¼ í•œì”í•˜ì…”ì•¼ì§€ìš”.\nY:.....ê¼´ê¹`, `P:ì¡°ì‚¬ë¥¼ í•´ì•¼ ì–µìš¸í•œ ì ì„ ì†Œëª…í•  ê±° ì•„ë‹™ë‹ˆê¹Œ? ì˜ ì•„ì‹œì–ìŠµë‹ˆê¹Œ?\nY:.....ê·¸ë ‡êµ°`, `P:ì „ì§ êµ­ê°€ì›ìˆ˜ì— ëŒ€í•œ ì˜ˆìš°ì— ê±¸ë§ê²Œ ì¡°ì‚¬í•  ê²ƒì…ë‹ˆë‹¤. ë”°ë¼ì£¼ì‹œì§€ìš”.\nY:ì „ì§... êµ­ê°€ì›ìˆ˜..., ì˜¤ëœë§Œì— ë“£ëŠ”êµ°.\nN:Yì˜ ëˆˆì´ í”ë“¤ë¦½ë‹ˆë‹¤.`, `P:ì§€ê¸ˆë¶€í„° í”¼ì˜ìì— ëŒ€í•´ ë¬¼ë¦¬ë ¥ì„ ë™ì›í•œ ì²´í¬ì— ë‚˜ì„ ë‹¤.\nY:ì—ì´ì´ì´ì´ìµ!!! ë‹¹ì¥ ê·¸ë§Œë‘ì§€ ëª»í•´!!\nN:YëŠ” ê·¹ë„ë¡œ í¥ë¶„í•˜ì˜€ë‹¤.`, `P:ì–¸ì œê¹Œì§€ ì´ëŸ¬ê² ìŠµë‹ˆê¹Œ? ì–¼ë¥¸ ì¡°ì‚¬ ë°›ê³  ì‰¬ì…”ì•¼ì§€ìš”.\nY:ì¢€ ì§€ì¹˜ëŠ”êµ°. ì´ì œ ì‰¬ê³  ì‹¶ì–´... ì¡°ì‚¬ë¥¼ ë°›ì•„ë„ ë˜ì§€ ì•Šì„ê¹Œ?\nN:Yì˜ ê²½ê³„ê°€ í’€ë¦¬ëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤.`, `P:ì´ ìëŠ” ì „ì§ ëŒ€í†µë ¹ì´ ì•„ë‹ˆë¼ ì²´í¬ë¥¼ ê±°ë¶€í•˜ëŠ” ë²”ë¶€ë‹¤. ëŒì–´ë‚´!\nY:ë¬´ìŠ¨ ì§“ì´ì•¼! ì ˆëŒ€ ì•ˆë¼!\nN:YëŠ” ë‹¹í™©í•˜ê³ , ì§€ì¹œ ê¸°ìƒ‰ì´ ì—­ë ¥í•˜ë‹¤.`, `P:í”¼ì˜ì, ì¥ë‚œì€ ëì´ë‹¤. 4ëª…ì´ì„œ íŒ”, ë‹¤ë¦¬ë¥¼ ë¶™ì¡ì•„ì„œ ëŒì–´ë‚´!\nY:ì•ˆë¼! ì•„ì•„ì•„ì•…!! ì´ëŸ´ ìˆœ ì—†ì–´!! ì œë°œ ê·¸ë§Œë‘¬!! ì´ì´ìµ!!!\nN:YëŠ” íŒ”ë‹¤ë¦¬ê°€ ë“¤ì–´ì˜¬ë ¤ì ¸ ê°•ì œë¡œ ì°¨ì— íƒœì›Œì¡ŒìŠµë‹ˆë‹¤. ì²´í¬ëŠ” ëŒ€ì„±ê³µì…ë‹ˆë‹¤!`
        ];
        const gameOverDialogs = {
            'ì„¤ë“': `P:ì›¬ë§Œí•˜ë©´ ë”°ë¥´ì‹œì§€ìš”?\nY:ìœ¤ ì–´ê²Œì¸!\nN:ë‹¹ì‹ ì€ ì„¤ë“ì— ì‹¤íŒ¨í–ˆë‹¤.`, 'ìœ í˜¹': `P:ìˆ  í•œì” ê±¸ì¹˜ë©´ ë”°ë¥´ì‹œê² ìŠµë‹ˆê¹Œ?\nY:ë‚´ê°€ ìˆ ì— ë¯¸ì¹œ ì‚¬ëŒìœ¼ë¡œ ë³´ì´ë‚˜!!`, 'ê°•ì œ': `P:ì§€ê¸ˆë¶€í„° ìš°ë¦¬ê°€ ì§€íœ˜í•©ë‹ˆë‹¤. êµë„ê´€ë“¤ì€ ë‹¹ì¥ ì´ ìë¥¼ ëŒì–´ë‚´ì„¸ìš”.\nO:ê´œíˆ ë‚˜ì„°ë‹¤ê°€ ê³ ì†Œë§Œ ë‹¹í•˜ëŠ” ê²Œ ì•„ë‹ê¹Œ?\nN:ë¬´ë¦¬í•œ ì²´í¬ ì§€íœ˜ì— êµ¬ì¹˜ì†Œì¸¡ì´ í˜‘ì¡°í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.`, 'ê³„ì—„': `P:ìˆ˜ë‹¨ê³¼ ë°©ë²•ì„ ê°€ë¦´ë•Œê°€ ì•„ë‹ˆë‹¤. í…Œì´ì €ê±´ ë°œì‚¬! ê³ ë¬´íƒ„ ë°œì‚¬! ê³µí¬íƒ„ ë°œì‚¬! ì‹¤íƒ„ ë°œì‚¬!\nY:ì•„ì•„ì•„ì•„ì•„ì•„ì•„ì•„ì•„ì•„ì•…!!!\nN:ë¬´ë¦¬í•œ ê°•ì œ ì§‘í–‰ìœ¼ë¡œ í”¼ì˜ìê°€ ì£½ì—ˆìŠµë‹ˆë‹¤. ì´ë²ˆ ì‚¬ê³ ë¡œ íŠ¹ê²€ì€ ëª¨ë“  ìˆ˜ì‚¬ ë™ë ¥ì„ ìƒì–´ë²„ë¦¬ê³  ë§ì•˜ìŠµë‹ˆë‹¤.`
        };

        let currentStep = 0, isGameOver = false, dialogLines = [], dialogIndex = 0;

        function formatDialog(line) {
            let speakerTag = '', dialogText = line;
            const parts = line.split(/:(.*)/s);
            if (parts.length > 1) {
                const speakerCode = parts[0]; dialogText = parts[1];
                switch(speakerCode) {
                    case 'P': speakerTag = '<span class="speaker speaker-p">í”Œë ˆì´ì–´:</span> '; break;
                    case 'Y': speakerTag = '<span class="speaker speaker-y">Y:</span> '; break;
                    case 'N': speakerTag = '<span class="speaker speaker-n">ë‚˜ë ˆì´ì…˜:</span> '; break;
                    case 'O': speakerTag = '<span class="speaker speaker-o">êµë„ê´€:</span> '; break;
                }
            }
            return speakerTag + dialogText;
        }

        function showNextLine() {
            continueIndicator.classList.remove('hidden');
            if (dialogIndex < dialogLines.length) {
                textContentSpan.innerHTML = formatDialog(dialogLines[dialogIndex]);
                dialogIndex++;
            } else {
                dialogLines = []; dialogIndex = 0;
                continueIndicator.classList.add('hidden');
                if (isGameOver) {
                    endGame(false);
                } else {
                    currentStep++;
                    updateProgressBar();
                    if (currentStep === correctSequence.length) {
                        endGame(true);
                    } else {
                        enableButtons(true);
                    }
                }
            }
        }

        function handleDialogClick() { if (dialogLines.length > 0) showNextLine(); }

        function sendCommand(command) {
            if (isGameOver || dialogLines.length > 0) return;
            if (command === correctSequence[currentStep]) {
                enableButtons(false);
                dialogLines = successDialogs[currentStep].split('\n');
                showNextLine();
            } else {
                loseGame(command);
            }
        }

        function updateProgressBar() { progressBar.style.width = `${(currentStep / correctSequence.length) * 100}%`; }

        function resetGame() {
            gameWrapper.classList.remove('hidden');
            winScreen.classList.add('hidden');
            currentStep = 0; isGameOver = false; dialogLines = []; dialogIndex = 0;
            gameStatus.textContent = ''; gameStatus.className = '';
            updateProgressBar();
            enableButtons(true);
            btnFailRetry.classList.add('hidden');
            textContentSpan.innerHTML = formatDialog('P:ìˆœìˆœíˆ ì‘í•˜ëŠ” ê²Œ ì¢‹ì„ ê±°ìš”. ì €í•­ì€ ë¬´ì˜ë¯¸í•˜ë‹¤.');
        }

        function loseGame(failedCommand) {
            isGameOver = true; enableButtons(false);
            gameStatus.textContent = "ì‘ì „ ì‹¤íŒ¨...";
            gameStatus.className = 'game-over';
            dialogLines = gameOverDialogs[failedCommand].split('\n');
            showNextLine();
        }

        function endGame(isWin) {
            if (isWin) {
                gameWrapper.classList.add('hidden');
                winScreen.classList.remove('hidden');
            } else {
                btnFailRetry.classList.remove('hidden');
            }
        }

        function enableButtons(enable) { allButtons.forEach(button => { button.disabled = !enable; }); }

        target.addEventListener('click', () => {
            if (isGameOver || dialogLines.length > 0) return;
            const randomIndex = Math.floor(Math.random() * quotes.length);
            textContentSpan.innerHTML = formatDialog(`Y:${quotes[randomIndex]}`);
        });

        btnStart.addEventListener('click', () => {
            startScreen.classList.add('hidden');
            explanationScreen.classList.remove('hidden');
        });

        btnContinue.addEventListener('click', () => {
            explanationScreen.classList.add('hidden');
            resetGame();
        });

        btnWinRetry.addEventListener('click', resetGame);
        btnFailRetry.addEventListener('click', resetGame);
    </script>
</body>
</html>
